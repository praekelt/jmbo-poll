{% load i18n %}

<div class="object-detail-inclusion poll-detail-inclusion" id="poll-detail-oid-{{ object.id }}">
    {% if can_vote_on_poll %}
        <form action="{% url poll-detail-vote object.id %}" method="POST">
            {% csrf_token %}
            {{ form.as_div }}
            <div class="buttons">
                <input type="submit" value="{% trans "Vote" %}" />
            </div>
        </form>
    {% else %}
        <table class="poll-results" cellspacing="0">        
        {% for obj in object.polloption_set.all %}
            <tr class="poll-result-{{ forloop.counter }}">
                <td>{{ obj.title }}</td> 
                <td class="bar">
                    <div style="width: {{ obj.percentage }}%;">&nbsp;</div>
                </td>
                <td>
                    {{ obj.percentage|floatformat }}%
                </td>
            </tr>
        {% endfor %}
        </table>

        {% if reason == 'auth_required' %}
            <a href="{% url login %}">{% trans "You must be signed in to vote" %}</a>
        {% endif %}

    {% endif %}
    
</div>
